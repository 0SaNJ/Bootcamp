My Journey Through Bootcamp


# Who am I?

Hi everyone my name is Jay, Jay Princeton Sanmohadi. I am from Suriname, born and raised. I am currently 17 years of age. I am currently in my 2nd year of High School. VOS Welgedacht C class V504.

My hobbies are soccer and coding and a lil bit of games. I was always interested in the I.C.T. world and wanted to become something in that world. And last year in the month of September I stumbled upon a program called the inno-starter sponsored by Tullow-Oil and run ( managed ) by the lovely Miss Julie Sundar.

So I conveniently decided to sign up for I found it very helpful in my career into becoming a coder. And within a few months I managed to graduate. While I was in the inno-starter I also participated in the Hacko-topia where I did not win but I managed to impress some of the judges. And a few days later Miss Julie asked me if I would like to join another program of hers called Codettes Bootcamp where I would study various I.T. related things.

And now won't you join me as I embark on this journey of the Codettes Bootcamp on a day to day basis.


# Week 1 


## Day 1 ( online )

We start the codettes bootcamp journey by learning markdown and making our documents.


### Setup documenting environment:

1. First we download a markdown viewer to make changes to our documentation (<https://www.fosslinux.com/69203/install-notepad-on-ubuntu.htm> notepad++ for ubuntu )
2. First off you want to make a git account ( <https://github.com/> )
3. ![](https://lh3.googleusercontent.com/MSqPxl5pENASKIv3-1ci7rzgOqZAjGe8iRKyV3OcmqLrtKbHmwqxDlrWn7sUU3URMwELsyfVDwLZCXqrsB3nAMYjhltjFCxgdpqYQzB7oozsDzq3IlZ6W4LVv91rI2AoMY75dLnOyf26dRe-cW7iEVM)
4. Download GitHub desktop on ubuntu (<https://gist.github.com/berkorbay/6feda478a00b0432d13f1fc0a50467f1>)
5. Clone your repository in your GitHub Desktop![](https://lh3.googleusercontent.com/BYgiO5AeoNX_-MoYKBA1yGizYdSep4ZxqTJBVyr1gY57hyUEur5PJ-tLFNwrEY3QT-V2AJYb-cqKKYTucL8kTF8yAq8-AsF6MdGh3AUJa15g2UMaJ_f1GRAXgF8gRjl3bEGN4IZi0XLICTmMSFf_HoY) →![](https://lh5.googleusercontent.com/MjBqyUO5N25M2lhNZf69d-eQKibLaXJRgpIVI9P5cjZ6BJoKitfU_ECKKbLtgvUjKOLDPhvKmQ2G9MPL1BhodMab2TaEZtCPw7jKz_SAMjMkXya2E8J0AspiW4srCZ3G9mXMLMkmzWWTtAP-rr-xWD4) →![](https://lh3.googleusercontent.com/5jKD8MDTlLI4nmT_mwB2MjdOmGKAatAHKzxzirBfkweUVC2N3VVvPyz3ijnjUFP-yTZWMAWLva19UWLt12x6Shywr7TYIWRbOmh2KgVnXAcGtEtOR7833krSr55w3513nkqMVuUgVergE21dWuRG8AA)
6. Choose the repository you want to clone ![](https://lh3.googleusercontent.com/FbVh1ftJ8uNPxnt3s1iiheAK_0eiXSfiyFY521sEOksQKCwQpvsCsGgRO8OikdohbqdQJ2IFGzAUJ6uxhfR3-eZo9f7T0uh9qCaBTXyt57S00ki2AkVPzuwAKsdfktmfV2ueMD1SU_wPQHFE9oLmHE0)
7. Then you will get a file named “GitHub” in your documents 
8. Then download the clone repository and put the files in your GitHub document. (<https://drive.google.com/drive/folders/1rEbBA5UYhnrQrHGsEiU3D2dWEZyIuBi2?usp=sharing> )
9. Then you can push your files via GitHub Desktop 
10. Now you will need to get a link to see your documentation![](https://lh6.googleusercontent.com/Jo08js-lawUSTUfdQgUmUsksGFpwqfjz5Ev56NQbjeuR8QCrkBnPIDyz-psFPNC3N-O3s1Qe4EoLKSYugnIHgikF6TMG59Z2ZMV_MgmLA4hessmDhTGbD8TB_p-u5OtJlp-mt6EsWBb55yYE3zIPvmI)
11.  We can make changes online and offline for offline changes we will need markdown (<https://www.markdownguide.org/cheat-sheet/> a cheat sheet ). It is also possible to just do it on google docs and convert it to markdown (<https://euangoddard.github.io/clipboard2markdown/> docs to markdown converter ) we can also download an extension for notepad++ to view our markdown before we upload it ( does not work on ubuntu ) 
12.  If we do it online we need to work in the index file and use markdown language. And if we are done we need to pull it offline via github desktop. 


# Week 2 


## Day 2 ( online )


### Setup esp32 environment:

1. Download Arduino IDE version 1.8.x (<https://www.arduino.cc/en/software/OldSoftwareReleases> )
2. Setup your esp32 in the Arduino IDE ![](https://lh4.googleusercontent.com/qysa-8D2r9CtWp5gSGEDLqL4tYNoEq2eGliZm673tZWoATJqcVnbBRbqAez2JcGHo6D5gi8I3S8RuE7USK-sAbKrQuu8pIhB8RFxWcpfxiKzhSPkMJ9ElPafgvEf8CDhzkrKTFyq7rgY-bOm4-GFZaw)Paste <https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_dev_index.json> in your additional board manager in the preferences of your IDE.
3. Download the esp32 boards in your boards manager![](https://lh3.googleusercontent.com/10L92nqvm9s-hrYhiWjNE8ILZD3Okk8BGxs4pXSjVsnlG_Swd8GTakpXyqiwlY0Rmh8LlzzfhhhOLqyRG-ztDFUppMRnNa-IUoc0VS5MXIZ2lmO-xLtczuffVJDiZjho0vNyBT5qG1Hxl5M45xp6QPk)
4. Select your board ![](https://lh6.googleusercontent.com/vQPAkwcasUIWYEJN8ZEn2sWOOKpfkzk5rT-EmsFzOS2mw98pi6IpdboY26tKv2gZvYLvk9conr4NHqRWItveVwRbd-XbeeZAvzvzm3NjFEPFfWPHsmUvP7eUFZNKX0Nbx1R04TKha_GzYe1s9u11k1g)


### First Code:

1. Download the code and follow the instructions <https://randomnerdtutorials.com/install-esp32-filesystem-uploader-arduino-ide/> ![](https://lh4.googleusercontent.com/cz1tvGcO9pnvvuMaAlvOL4XrNq1IOOfTSR-zZjUfaxrAVqzCvBFE4kNYBF7YKvp7kKZuj4uEHcN8wAQ3C5EjacPve9wxV0MDwm8A-g7LMJnZe7T7ys0I7xmjsDvF75l0gcMgQGb8u6AdeZpoojE_Tsc)
2. Make a folder called code like this ![](https://lh5.googleusercontent.com/w6Mubh-ZRX3wsUa_nrGmk00MKy0DW4iEScSKfmz2vpEvIuiSrl4BR3GuKpbdc3kAx4cpwhqF5QBFpIKDq2DvNbSYC18jCXzkamDwlorS_MG8m9GrJ5hx99ggfDi9Po_N7TbfapIT-pAuQOG44uPblpE)
3. Install spiffs ( Make folder called tools and install spiffs there ) like here ![](https://lh5.googleusercontent.com/bMRUblQ8VTyNvsbPz86SXEtvQrqo09lMiclJdRpK0kabfdKmV4g6JYHNd6bouz4DHgwqtlHeUGp7hty7ZZSNmt-LL7NhoJIBjMCyamiNT16-DBS47d5gwRfrWUApJeqdQgJN7qMcspUBSsI0jukHBiI)If everything is done correctly you should see this ESP32 Sketch Data Upload![](https://lh3.googleusercontent.com/v6mCkhLS-bAf-1eSYEIUQx42_JL_i2N7qFUBAFXWxem1U42Lc_kg93ywRNNbVdpcMfrXDvbyy2RYLiG8wyMI9pIVTDOYUx0JhuULgdKRZdMYbeYVW4DExSTOcAf7mhgYCopF9k-ulpifY8gXt5W3Jhc)
4. Open the .ino file and change your wifi credentials ![](https://lh3.googleusercontent.com/03c_DzUcHgfOe6u7E0ped8BY1RJe1mUe5WEYVg2eWUBrPfHepLU3WPkF2_CqHJxRSclD1msyAsxyA1j4iho89AgqY8_vWBR0PupafNjLODC6jkTDUG9ChVCNsIJIouVXRxbla8Gta4fcnRxtjXte5F4)
5. C++ Code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| /\*\*\*\*\*\*\*\*\*   Rui Santos   Complete project details at https&#x3A;//randomnerdtutorials.com  \*\*\*\*\*\*\*\*\*/ // Import required libraries #include "WiFi.h" #include "ESPAsyncWebServer.h" #include "SPIFFS.h" // Replace with your network credentials const char\* ssid = "HUAWEI-2.4G-yzad"; const char\* password = "SkNH972g"; // Set LED GPIO const int ledPin = 2; // Stores LED state String ledState; // Create AsyncWebServer object on port 80 AsyncWebServer server(80); // Replaces placeholder with LED state value String processor(const String& var){   Serial.println(var);   if(var == "STATE"){     if(digitalRead(ledPin)){       ledState = "ON";     }     else{       ledState = "OFF";     }     Serial.print(ledState);     return ledState;   }   return String(); }   void setup(){   // Serial port for debugging purposes   Serial.begin(115200);   pinMode(ledPin, OUTPUT);   // Initialize SPIFFS   if(!SPIFFS.begin(true)){     Serial.println("An Error has occurred while mounting SPIFFS");     return;   }   // Connect to Wi-Fi   WiFi.begin(ssid, password);   while (WiFi.status() != WL_CONNECTED) {     delay(1000);     Serial.println("Connecting to WiFi..");   }   // Print ESP32 Local IP Address   Serial.println(WiFi.localIP());   // Route for root / web page   server.on("/", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send(SPIFFS, "/index.html", String(), false, processor);   });     // Route to load style.css file   server.on("/style.css", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send(SPIFFS, "/style.css", "text/css");   });   // Route to set GPIO to HIGH   server.on("/on", HTTP_GET, \[](AsyncWebServerRequest \*request){     digitalWrite(ledPin, HIGH);        request->send(SPIFFS, "/index.html", String(), false, processor);   });     // Route to set GPIO to LOW   server.on("/off", HTTP_GET, \[](AsyncWebServerRequest \*request){     digitalWrite(ledPin, LOW);        request->send(SPIFFS, "/index.html", String(), false, processor);   });   // Start server   server.begin(); }   void loop(){   } |

( [link to github code ](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_async_webserver_c%2B%2B) )

6. Upload ESP32 Sketch Data Upload if you did everything right you should see this → ![](https://lh4.googleusercontent.com/TjxNQx_6zumnOBazB6xi6B9YkQH-rptCMzQCmhGBePo_PJ3gxIhIi2cKUyfXPsTnBpDKOU2G2E0bIxAoXemTNqi3Q6oHU_uBB37pqKYnVsk6sqOmOWnVncxLmA3DKyxPnhfKUpAaw1HChNqRqZ7Egjc)
7. The html code

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| &lt;!DOCTYPE html> &lt;html> &lt;head> &lt;title>ESP32 Web Server&lt;/title> &lt;meta name="viewport" content="width=device-width, initial-scale=1"> &lt;link rel="icon" href="data:,"> &lt;link rel="stylesheet" type="text/css" href="style.css"> &lt;style> html{ font-family: Helvetica; display: inline-block; margin: 0px auto; text-align: center; } h1{ color: #0F3376; padding: 2vh; } p{ font-size: 1.5rem; } .button{ display: inline-block; background-color: #008CBA; border: none; border-radius: 4px; color: white; padding: 16px 40px; text-decoration: none; font-size: 30px; margin: 2px cursor pointer; } .button2{ background-color: #f44336; } &lt;/style> &lt;/head> &lt;body> &lt;h1>ESP32 Web Server&lt;/h1> &lt;p>GPIO state: &lt;strong> %STATE%&lt;/strong>&lt;/p> &lt;p>&lt;a href="/on">&lt;button class="button">ON&lt;/button>&lt;/a>&lt;/p> &lt;p>&lt;a href="/off">&lt;button class="button button2">OFF&lt;/button>&lt;/a>&lt;/p> &lt;/body> &lt;/html> |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_async_webserver_html) )

8. Now Upload the code and see if it works if everything is done right you should see this ![](https://lh3.googleusercontent.com/kHGSQ0JPDOHJDYC-cq3Ewp0-2WDsjw2bHfdVjHHEZ7qtvkoWZzDwOHYLZDcaef267eQaBzFXYrftHWG0FSGU1FTCJKsqAONojTIuR4C_VgFhTjxchxp4IiyxB6IItW2k80WpMI0hCPv0Fq-y1mtmcZI)and should have a led that can turn on and off via websockets like here![](https://lh3.googleusercontent.com/RY7qqSrpGZklTar6gdDe9hA3rxDuS4EF-e8eGx12nuHzojPKuRUt1h4NWOaIQMk5SGZh0GGITjRSpZtdj7CxAryQpQZ1uhD2GlWQG56aZ4YHdezOwHLO2T30nrkTHkJIIcZiE-sWTzfIJ1KLY0Jy7EM)
9. The CSS code

|                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| html {   font-family: Helvetica;   display: inline-block;   margin: 0px auto;   text-align: center; } h1{   color: #0F3376;   padding: 2vh; } p{   font-size: 1.5rem; } .button {   display: inline-block;   background-color: #008CBA;   border: none;   border-radius: 4px;   color: white;   padding: 16px 40px;   text-decoration: none;   font-size: 30px;   margin: 2px;   cursor: pointer; } .button2 {   background-color: #f44336; } |


# Week 3


## Day 3 ( online )


### Multiple sliders code:

1. First we need to download our libraries  ( <https://github.com/arduino-libraries/Arduino_JSON> ) 
2. We make a libraries folder then put or library in there like here![](https://lh6.googleusercontent.com/ebOneerI-iERkSBpnBhMBnBLWFP2SP87xPO8lGvGA7IIekMuoeEl_N4PJiHRdJmrmv2gEkHwKP4AWJWEro6ea2TpQs7xAv4FxNLLdbHGeqQgqAAbIjtFAAswqpjaG4lgW0ZU2kmu6WtPV3GTc5XMLNo)
3. Then we put it in our arduino libraries folder ![](https://lh5.googleusercontent.com/Az4-5waqq2FCyKGnGPd_-egQzhjTamo82DBr7Q_Xry4B1vUkSBc7FUA67UQuZ8JgEv3PDamMAkgysc6JiPN9oj69qxJlAx8asXe1vmt40QfhY2k1PPxlqs8NqzYGopFjYYThfcmdJLAsEkkN_5g0PLg)
4. Now we download the code and follow the tutorial here ( <https://randomnerdtutorials.com/esp32-web-server-websocket-sliders/> )
5. The C++ code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| /\*   Rui Santos   Complete project details at https&#x3A;//RandomNerdTutorials.com/esp32-web-server-websocket-sliders/     Permission is hereby granted, free of charge, to any person obtaining a copy   of this software and associated documentation files.     The above copyright notice and this permission notice shall be included in all   copies or substantial portions of the Software. \*/ #include &lt;Arduino.h> #include &lt;WiFi.h> #include &lt;AsyncTCP.h> #include &lt;ESPAsyncWebServer.h> #include "SPIFFS.h" #include &lt;Arduino_JSON.h> // Replace with your network credentials const char\* ssid = "HUAWEI-2.4G-yzad"; const char\* password = "SkNH972g"; // Create AsyncWebServer object on port 80 AsyncWebServer server(80); // Create a WebSocket object AsyncWebSocket ws("/ws"); // Set LED GPIO const int ledPin1 = 32; const int ledPin2 = 26; const int ledPin3 = 14; const int ledPin4 = 12; const int ledPin5 = 13; String message = ""; String sliderValue1 = "0"; String sliderValue2 = "0"; String sliderValue3 = "0"; String sliderValue4 = "0"; String sliderValue5 = "0"; int dutyCycle1; int dutyCycle2; int dutyCycle3; int dutyCycle4; int dutyCycle5; // setting PWM properties const int freq = 5000; const int ledChannel1 = 0; const int ledChannel2 = 1; const int ledChannel3 = 2; const int ledChannel4 = 3; const int ledChannel5 = 4; const int resolution = 8; //Json Variable to Hold Slider Values JSONVar sliderValues; //Get Slider Values String getSliderValues(){   sliderValues\["sliderValue1"] = String(sliderValue1);   sliderValues\["sliderValue2"] = String(sliderValue2);   sliderValues\["sliderValue3"] = String(sliderValue3);   sliderValues\["sliderValue4"] = String(sliderValue4);   sliderValues\["sliderValue5"] = String(sliderValue5);   String jsonString = JSON.stringify(sliderValues);   return jsonString; } // Initialize SPIFFS void initFS() {   if (!SPIFFS.begin()) {     Serial.println("An error has occurred while mounting SPIFFS");   }   else{    Serial.println("SPIFFS mounted successfully");   } } // Initialize WiFi void initWiFi() {   WiFi.mode(WIFI_STA);   WiFi.begin(ssid, password);   Serial.print("Connecting to WiFi ..");   while (WiFi.status() != WL_CONNECTED) {     Serial.print('.');     delay(1000);   }   Serial.println(WiFi.localIP()); } void notifyClients(String sliderValues) {   ws.textAll(sliderValues); } void handleWebSocketMessage(void \*arg, uint8_t \*data, size_t len) {   AwsFrameInfo \*info = (AwsFrameInfo\*)arg;   if (info->final && info->index == 0 && info->len == len && info->opcode == WS_TEXT) {     data\[len] = 0;     message = (char\*)data;     if (message.indexOf("1s") >= 0) {       sliderValue1 = message.substring(2);       dutyCycle1 = map(sliderValue1.toInt(), 0, 100, 0, 255);       Serial.println(dutyCycle1);       Serial.print(getSliderValues());       notifyClients(getSliderValues());     }     if (message.indexOf("2s") >= 0) {       sliderValue2 = message.substring(2);       dutyCycle2 = map(sliderValue2.toInt(), 0, 100, 0, 255);       Serial.println(dutyCycle2);       Serial.print(getSliderValues());       notifyClients(getSliderValues());     }        if (message.indexOf("3s") >= 0) {       sliderValue3 = message.substring(2);       dutyCycle3 = map(sliderValue3.toInt(), 0, 100, 0, 255);       Serial.println(dutyCycle3);       Serial.print(getSliderValues());       notifyClients(getSliderValues());     }     if (message.indexOf("4s") >= 0) {       sliderValue4 = message.substring(2);       dutyCycle4 = map(sliderValue4.toInt(), 0, 100, 0, 255);       Serial.println(dutyCycle4);       Serial.print(getSliderValues());       notifyClients(getSliderValues());     }     if (message.indexOf("5s") >= 0) {       sliderValue5 = message.substring(2);       dutyCycle5 = map(sliderValue5.toInt(), 0, 100, 0, 255);       Serial.println(dutyCycle5);       Serial.print(getSliderValues());       notifyClients(getSliderValues());     }     if (strcmp((char\*)data, "getValues") == 0) {       notifyClients(getSliderValues());     }   } } void onEvent(AsyncWebSocket \*server, AsyncWebSocketClient \*client, AwsEventType type, void \*arg, uint8_t \*data, size_t len) {   switch (type) {     case WS_EVT_CONNECT:       Serial.printf("WebSocket client #%u connected from %s\\n", client->id(), client->remoteIP().toString().c_str());       break;     case WS_EVT_DISCONNECT:       Serial.printf("WebSocket client #%u disconnected\\n", client->id());       break;     case WS_EVT_DATA:       handleWebSocketMessage(arg, data, len);       break;     case WS_EVT_PONG:     case WS_EVT_ERROR:       break;   } } void initWebSocket() {   ws.onEvent(onEvent);   server.addHandler(&ws); } void setup() {   Serial.begin(115200);   pinMode(ledPin1, OUTPUT);   pinMode(ledPin2, OUTPUT);   pinMode(ledPin3, OUTPUT);   pinMode(ledPin4, OUTPUT);   pinMode(ledPin5, OUTPUT);   initFS();   initWiFi();   // configure LED PWM functionalities   ledcSetup(ledChannel1, freq, resolution);   ledcSetup(ledChannel2, freq, resolution);   ledcSetup(ledChannel3, freq, resolution);   ledcSetup(ledChannel4, freq, resolution);   ledcSetup(ledChannel5, freq, resolution);   // attach the channel to the GPIO to be controlled   ledcAttachPin(ledPin1, ledChannel1);   ledcAttachPin(ledPin2, ledChannel2);   ledcAttachPin(ledPin3, ledChannel3);   ledcAttachPin(ledPin4, ledChannel4);   ledcAttachPin(ledPin5, ledChannel5);   initWebSocket();     // Web Server Root URL   server.on("/", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send(SPIFFS, "/index.html", "text/html");   });     server.serveStatic("/", SPIFFS, "/");   // Start server   server.begin(); } void loop() {   ledcWrite(ledChannel1, dutyCycle1);   ledcWrite(ledChannel2, dutyCycle2);   ledcWrite(ledChannel3, dutyCycle3);   ledcWrite(ledChannel4, dutyCycle4);   ledcWrite(ledChannel5, dutyCycle5);     ws.cleanupClients(); } |

 ( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_multiple_sliders_webserver_code) )

6. We repeat the process from last week and upload the spiff then the code then we should have a working web page with sliders and leds. If done right you should get something like this.

|   |
| - |
|   |

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| _&lt;!-- Complete project details: https&#x3A;//randtutorials.com/esp32-web-server-websocket-sliders/ -->_ &lt;!DOCTYPE html> &lt;html> &lt;head> &lt;title>ESP IOT DASHBOARD&lt;/title> &lt;meta name="viewport" content="width=device-width, initial-scale=1"> &lt;link rel="icon" type="image/png" href="favicon.png"> &lt;link rel="stylesheet" type="text/css" href="style.css"> &lt;/head> &lt;body> &lt;div class="topnav"> &lt;h1>Multiple Sliders&lt;/h1> &lt;/div> &lt;div class="content"> &lt;div class="card-grid"> &lt;div class="card"> &lt;p class="card-title">Fader 1&lt;/p> &lt;p class="switch"> &lt;input type="range" onchange="updateSliderPWM(this)" id="slider1" min="0" max="100" step="1" value ="0" class="slider"> &lt;/p> &lt;p class="state">Brightness: &lt;span id="sliderValue1">&lt;/span> &amp;percnt;&lt;/p> &lt;/div> &lt;div class="card"> &lt;p class="card-title"> Fader 2&lt;/p> &lt;p class="switch"> &lt;input type="range" onchange="updateSliderPWM(this)" id="slider2" min="0" max="100" step="1" value ="0" class="slider"> &lt;/p> &lt;p class="state">Brightness: &lt;span id="sliderValue2">&lt;/span> &amp;percnt;&lt;/p> &lt;/div> &lt;div class="card"> &lt;p class="card-title"> Fader 3&lt;/p> &lt;p class="switch"> &lt;input type="range" onchange="updateSliderPWM(this)" id="slider3" min="0" max="100" step="1" value ="0" class="slider"> &lt;/p> &lt;p class="state">Brightness: &lt;span id="sliderValue3">&lt;/span> &amp;percnt;&lt;/p> &lt;/div> &lt;div class="card"> &lt;p class="card-title"> Fader 4&lt;/p> &lt;p class="switch"> &lt;input type="range" onchange="updateSliderPWM(this)" id="slider4" min="0" max="100" step="1" value ="0" class="slider"> &lt;/p> &lt;p class="state">Brightness: &lt;span id="sliderValue4">&lt;/span> &amp;percnt;&lt;/p> &lt;/div> &lt;div class="card"> &lt;p class="card-title"> Fader 5&lt;/p> &lt;p class="switch"> &lt;input type="range" onchange="updateSliderPWM(this)" id="slider5" min="0" max="100" step="1" value ="0" class="slider"> &lt;/p> &lt;p class="state">Brightness: &lt;span id="sliderValue5">&lt;/span> &amp;percnt;&lt;/p> &lt;/div> &lt;/div> &lt;/div> &lt;script src="script.js">&lt;/script> &lt;/body> &lt;/html> |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_multiple_sliders_webserver_code_html) )  
![](https://lh5.googleusercontent.com/gWQAb5mIt_7xBcOOw9MsLQGKYPQV84FOWp_2LlnvYPUkbqJ2xwX1XtWYjRsWfxC2kJnFLc9q-7iYphF8IP_yARjmN8aJSVFSKjg8N-w7T86TyISZfl_lUcssRIEMnuK1cy0_LKQKNW7XZFhfYbyEDtA)

7. We can customize our webpage using css we do that by going into our index.html and configuring there ![](https://lh3.googleusercontent.com/t_9AS9A0cPzEx6vNfu1-guhBoAWMOPpfmMR3H0u9qVIgzCuph56GGdBSRK6r-2AtKunxP7a6DeUIl4ZUOEzW0n0n8IgRZbBRHcWh-HqdZLM2bCbPVeXwvt4JH2yIFFEK8vRf6GqtBPCza22E6WyGuOM)
8. The CSS Code

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| _/\* Complete project details: https&#x3A;//randomnerdtutorials.com/esp32-web-server-websocket-sliders/ \*/_ html { font-family: Arial, Helvetica, sans-serif; display: inline-block; text-align: center; background: rgb(212, 184, 184); } h1 { font-size: 1.8rem; color: black; } p { font-size: 1.4rem; } .topnav { overflow: hidden; background-color: #374fa0; } body { margin: 0; } .content { padding: 30px; } .card-grid { max-width: 700px; margin: 0 auto; display: grid; grid-gap: 2rem; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); } .card { background-color: rgb(216, 79, 79); box-shadow: 2px 2px 12px 1px rgba(140,140,140,.5); } .card-title { font-size: 1.2rem; font-weight: bold; color: #034078 } .state { font-size: 1.2rem; color:#1282A2; } .slider { -webkit-appearance: none; margin: 0 auto; width: 100%; height: 15px; border-radius: 10px; background: #FFD65C; outline: none; } .slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 30px; height: 30px; border-radius: 50%; background: #034078; cursor: pointer; } .slider::-moz-range-thumb { width: 30px; height: 30px; border-radius: 50% ; background: #034078; cursor: pointer; } .switch { padding-left: 5%; padding-right: 5%; } |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_multiple_sliders_webserver_code_css) )


# Week 4 


## Day 4 ( online )


### DHT sensor setup:

1. First off we have to understand which DHT sensor we have and how we should wire them.
2. The DHT were using is DHT 11 ![](https://lh4.googleusercontent.com/VkGcT2pqiGn311nBW3Iwjaydy7Px6GgT2Racn6hYMxe8gsLdoysUqoMp4UGLvt0TnltkqoRlVMvh8paNdDF9miJDxL3JFtLo_wPAiQSBZ-3nNmzkinSXl04asz3XWKNVFg6yWDcSb_-P9_3HG49z5BY)
3. How to wire the DHT 11![](https://lh3.googleusercontent.com/tYG03KhK0wMhrRQK08GoMw_A8eRxp7AKOrjZkhX4EIgCljmKZmFY_FAdN5lJ6PRnqhUGw4PrdB_LP9m4xgQYx5ZowKgZ0aAV-4bWCgOU-oUyJAQSRKOm3xW2fjZhoAJaHZcPN5VMcI_RJKFjueyo34U)
4. Then we download the required libraries to get the readings from the DHT ![](https://lh6.googleusercontent.com/2rlp4ams1oDWEwmPM15OhDfPtJDA_JICpmIOJBwTDGF6tT-F9X6knQ0L8DIiAXzilFxf0RJ7d51_-4Szut3L68b4seXj9jAMa-kI8ndM_BzsFOLFRNvWG97A9mnk0MN0nkNFgBHgY7SVawOpiJjGAmw)
5. Now we download the Adafruit Unified Sensor library ![](https://lh6.googleusercontent.com/cUQmRtF0xQWGFNjRWWM7rIw_O_siC7HdEjdpKwCHVxUkhgJqTNnu2NAr2uGBZeThDo1NF6VEj_QTHUXwXZsz6ZRVAclvwIE619v9abkYEoz7XpQJhfGwPvHUSVoWN5alkxVEkf2DXNo8qdqXzGmHmSU)( <https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-sensor-arduino-ide/> )
6. Then we implement the code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| // Example testing sketch for various DHT humidity/temperature sensors written by ladyada // REQUIRES the following Arduino libraries: // - DHT Sensor Library: https&#x3A;//github.com/adafruit/DHT-sensor-library // - Adafruit Unified Sensor Lib: https&#x3A;//github.com/adafruit/Adafruit_Sensor #include "DHT.h" #define DHTPIN 4     // Digital pin connected to the DHT sensor // Feather HUZZAH ESP8266 note: use pins 3, 4, 5, 12, 13 or 14 -- // Pin 15 can work but DHT must be disconnected during program upload. // Uncomment whatever type you're using! //#define DHTTYPE DHT11   // DHT 11 #define DHTTYPE DHT22   // DHT 22  (AM2302), AM2321 //#define DHTTYPE DHT21   // DHT 21 (AM2301) // Connect pin 1 (on the left) of the sensor to +5V // NOTE: If using a board with 3.3V logic like an Arduino Due connect pin 1 // to 3.3V instead of 5V! // Connect pin 2 of the sensor to whatever your DHTPIN is // Connect pin 4 (on the right) of the sensor to GROUND // Connect a 10K resistor from pin 2 (data) to pin 1 (power) of the sensor // Initialize DHT sensor. // Note that older versions of this library took an optional third parameter to // tweak the timings for faster processors.  This parameter is no longer needed // as the current DHT reading algorithm adjusts itself to work on faster procs. DHT dht(DHTPIN, DHTTYPE); void setup() {   Serial.begin(9600);   Serial.println(F("DHTxx test!"));   dht.begin(); } void loop() {   // Wait a few seconds between measurements.   delay(2000);   // Reading temperature or humidity takes about 250 milliseconds!   // Sensor readings may also be up to 2 seconds 'old' (its a very slow sensor)   float h = dht.readHumidity();   // Read temperature as Celsius (the default)   float t = dht.readTemperature();   // Read temperature as Fahrenheit (isFahrenheit = true)   float f = dht.readTemperature(true);   // Check if any reads failed and exit early (to try again).   if (isnan(h) \|\| isnan(t) \|\| isnan(f)) {     Serial.println(F("Failed to read from DHT sensor!"));     return;   }   // Compute heat index in Fahrenheit (the default)   float hif = dht.computeHeatIndex(f, h);   // Compute heat index in Celsius (isFahreheit = false)   float hic = dht.computeHeatIndex(t, h, false);   Serial.print(F("Humidity: "));   Serial.print(h);   Serial.print(F("%  Temperature: "));   Serial.print(t);   Serial.print(F("°C "));   Serial.print(f);   Serial.print(F("°F  Heat index: "));   Serial.print(hic);   Serial.print(F("°C "));   Serial.print(hif);   Serial.println(F("°F")); } |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_DHT_C%2B%2B) )

7. If everything is done right you should get something like this in your serial monitor  
   ![](https://lh4.googleusercontent.com/PROQHgCJf2kYX5i5PcW7BypT8sQN8ux8G-gHlr7tBjcjW1fyRC7c8QrE3kdC4CSqNaUpZZVDblyWjatW0nWpwczcFvbOJierQ3KV8F2kGtxLiv60lZ9xrCQhJTqQUYp1vU1LP3sbUW7geMj1ASXNBuM)


### DHT sensor with web server:

1. First off we make a new ino file and import this C++ code ( you can follow this link <https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-web-server-arduino-ide/> ) 
2. The C++ code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| /\*\*\*\*\*\*\*\*\*   Rui Santos   Complete project details at https&#x3A;//randomnerdtutorials.com  \*\*\*\*\*\*\*\*\*/ // Import required libraries #include "WiFi.h" #include "ESPAsyncWebServer.h" #include &lt;Adafruit_Sensor.h> #include &lt;DHT.h> // Replace with your network credentials const char\* ssid = "REPLACE_WITH_YOUR_SSID"; const char\* password = "REPLACE_WITH_YOUR_PASSWORD"; #define DHTPIN 27     // Digital pin connected to the DHT sensor // Uncomment the type of sensor in use: //#define DHTTYPE    DHT11     // DHT 11 #define DHTTYPE    DHT22     // DHT 22 (AM2302) //#define DHTTYPE    DHT21     // DHT 21 (AM2301) DHT dht(DHTPIN, DHTTYPE); // Create AsyncWebServer object on port 80 AsyncWebServer server(80); String readDHTTemperature() {   // Sensor readings may also be up to 2 seconds 'old' (its a very slow sensor)   // Read temperature as Celsius (the default)   float t = dht.readTemperature();   // Read temperature as Fahrenheit (isFahrenheit = true)   //float t = dht.readTemperature(true);   // Check if any reads failed and exit early (to try again).   if (isnan(t)) {         Serial.println("Failed to read from DHT sensor!");     return "--";   }   else {     Serial.println(t);     return String(t);   } } String readDHTHumidity() {   // Sensor readings may also be up to 2 seconds 'old' (its a very slow sensor)   float h = dht.readHumidity();   if (isnan(h)) {     Serial.println("Failed to read from DHT sensor!");     return "--";   }   else {     Serial.println(h);     return String(h);   } } const char index_html\[] PROGMEM = R"rawliteral( &lt;!DOCTYPE HTML>&lt;html> &lt;head>   &lt;meta name="viewport" content="width=device-width, initial-scale=1">   &lt;link rel="stylesheet" href="https&#x3A;//use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">   &lt;style>     html {      font-family: Arial;      display: inline-block;      margin: 0px auto;      text-align: center;     }     h2 { font-size: 3.0rem; }     p { font-size: 3.0rem; }     .units { font-size: 1.2rem; }     .dht-labels{       font-size: 1.5rem;       vertical-align:middle;       padding-bottom: 15px;     }   &lt;/style> &lt;/head> &lt;body>   &lt;h2>ESP32 DHT Server&lt;/h2>   &lt;p>     &lt;i class="fas fa-thermometer-half" style="color:#059e8a;">&lt;/i>     &lt;span class="dht-labels">Temperature&lt;/span>     &lt;span id="temperature">%TEMPERATURE%&lt;/span>     &lt;sup class="units">&amp;deg;C&lt;/sup>   &lt;/p>   &lt;p>     &lt;i class="fas fa-tint" style="color:#00add6;">&lt;/i>     &lt;span class="dht-labels">Humidity&lt;/span>     &lt;span id="humidity">%HUMIDITY%&lt;/span>     &lt;sup class="units">&amp;percnt;&lt;/sup>   &lt;/p> &lt;/body> &lt;script> setInterval(function ( ) {   var xhttp = new XMLHttpRequest();   xhttp.onreadystatechange = function() {     if (this.readyState == 4 && this.status == 200) {       document.getElementById("temperature").innerHTML = this.responseText;     }   };   xhttp.open("GET", "/temperature", true);   xhttp.send(); }, 10000 ) ; setInterval(function ( ) {   var xhttp = new XMLHttpRequest();   xhttp.onreadystatechange = function() {     if (this.readyState == 4 && this.status == 200) {       document.getElementById("humidity").innerHTML = this.responseText;     }   };   xhttp.open("GET", "/humidity", true);   xhttp.send(); }, 10000 ) ; &lt;/script> &lt;/html>)rawliteral"; // Replaces placeholder with DHT values String processor(const String& var){   //Serial.println(var);   if(var == "TEMPERATURE"){     return readDHTTemperature();   }   else if(var == "HUMIDITY"){     return readDHTHumidity();   }   return String(); } void setup(){   // Serial port for debugging purposes   Serial.begin(115200);   dht.begin();     // Connect to Wi-Fi   WiFi.begin(ssid, password);   while (WiFi.status() != WL_CONNECTED) {     delay(1000);     Serial.println("Connecting to WiFi..");   }   // Print ESP32 Local IP Address   Serial.println(WiFi.localIP());   // Route for root / web page   server.on("/", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send_P(200, "text/html", index_html, processor);   });   server.on("/temperature", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send_P(200, "text/plain", readDHTTemperature().c_str());   });   server.on("/humidity", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send_P(200, "text/plain", readDHTHumidity().c_str());   });   // Start server   server.begin(); }   void loop(){   } |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_DHT_webserver_C%2B%2B) )

3. Then we upload spiffs 
4. Then we should get this on your page if everything is done correctly ![](https://lh5.googleusercontent.com/ErFjtQXjPMPxRIOc23KLbepuVG2J8hcCQP2NECvzwcF-yiKw5adFuTlB0AsSlVUELEaTBEO8OrSa6iCZuZCOO9zVVNKF-ilaV5pGdyRTDFLU87Oc-Yi35xBZ4WyuNAxXn8j2V9aiAz-8hdZUe77pXl0)


# Week 5


## Day 5 ( online )


### MQTT setup:

1. First off we download MQTT lens ( <https://chrome.google.com/webstore/detail/mqttlens/hemojaaeigabkbcookmlgmdigohjobjm> )
2. We need to understand the connection that takes place when sending and parsing data via MQTT, here: ![](https://lh5.googleusercontent.com/-biheUU5W1uQqgIgNflFNqNzlwzXtTtB6AL2MuUWbazXJv3fPgrTZzXywdaqB5LUZlMilz70j4Ces_-AK9c5nO_2g4266O3sSyKjNlajNHjEvhaJmhiBxNrUO1IqA9SKXFyuzf-97te8mH5gU46gtDI)
3. For explanation we can follow this link ( <https://techtutorialsx.com/2017/04/24/esp32-publishing-messages-to-mqtt-topic/> )
4. The C++ code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| \#include &lt;WiFi.h> #include &lt;PubSubClient.h>   const char\* ssid = "HUAWEI-2.4G-yzad"; const char\* password =  "SkNH972g"; const char\* mqttServer = "broker.hivemq.com"; const int mqttPort = 1883; const char\* mqttUser = ""; const char\* mqttPassword = "";   WiFiClient espClient; PubSubClient client(espClient);   void setup() {     Serial.begin(115200);   WiFi.begin(ssid, password);     while (WiFi.status() != WL_CONNECTED) {     delay(500);     Serial.println("Connecting to WiFi..");   }     Serial.println("Connected to the WiFi network");     client.setServer(mqttServer, mqttPort);     while (!client.connected()) {     Serial.println("Connecting to MQTT...");       if (client.connect("ESP32Client", mqttUser, mqttPassword )) {         Serial.println("connected");       } else {         Serial.print("failed with state ");       Serial.print(client.state());       delay(2000);       }   }     client.publish("jay/sanmohadi", "Hello from ESP32");   }   void loop() {   client.loop(); } |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_DHT_MQTT_link_c%2B%2B) )

5. Then we proceed to make some changes to the code such as ![](https://lh3.googleusercontent.com/9lTwLqJO_z4nMGj0j4KkMVWvyfYz_4DpZa4jRw6bTEAr28iQyIRAhmD-dc2Gku0S8f4lZ0mlr3xTFvQGg0h4MtuN_bfEjyxcx0b0VGd2gTtXVQqlsYxkzk2xz8e4JpIDHeY0Pemjf8LGd4JQxibDd9M)
6. Then we go to MQTT lens we change our host name and our port like shown![](https://lh4.googleusercontent.com/sX2jiPqYknl0Ln_xXS6UhdW8-6MT_reuAAA2ipOipqzrkUGhjKRZ8YHwLac3HGZtP9R6Om4lYTjGe9dzuVujiRZIpKBaia0ZI1JD1RA_QfZt4jpvD1Uhdoz8Mpz0x5WC0V9i0jUf6iGZ82-oAroPsTQ)
7. Then you should get a message here ![](https://lh6.googleusercontent.com/rjOOK6lwRbHHITTD-iudvxqrVP04XoLLJoKhBJ0u8H7nAPDGtD6KrtsahAri_7haBu6f9W5ixfafTwRBfLCFmkbFMPM5KwQKWtQMFAxsOotiMGXGWpf22YMrl-t1w79n84R0ACkHyg_HYZmGriorHF8)


# Week 6 


## Day 6 ( online )


### DHT and MQTT link:

1. Today we are going to send our DHT data over via MQTT. First off we're are going to download the code from here and change our credentials ( Wifi SSID etc ) ( <https://docs.google.com/document/d/1gPfp3f9jbAcFxe7KjdTmtqzEG3QMySqYnl7Sw4jvW3E/edit> ) 
2. The C++ code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| /\*\*\*\*\*\*\*\*\*   Rui Santos   Complete project details at https&#x3A;//randomnerdtutorials.com  \*\*\*\*\*\*\*\*\*/ #include &lt;WiFi.h> #include &lt;ESPAsyncWebServer.h> #include &lt;SPIFFS.h> #include &lt;Wire.h> #include &lt;Adafruit_Sensor.h> #include &lt;PubSubClient.h> #include "DHT.h" // Replace the next variables with your SSID/Password combination const char\* ssid = "HUAWEI-2.4G-yzad"; const char\* password = "SkNH972g"; // Add your MQTT Broker IP address, example: //const char\* mqtt_server = "192.168.1.144"; const char\* mqtt_server = "broker.hivemq.com"; WiFiClient espClient; PubSubClient client(espClient); long lastMsg = 0; char msg\[50]; int value = 0; #define DHTPIN 4 #define DHTTYPE DHT11 DHT dht(DHTPIN, DHTTYPE); const int ledPin = 2; float temperature = 0; float humidity = 0; AsyncWebServer server(80); String readDHTTemperature() {   // Read temperature as Celsius (the default)   float t = dht.readTemperature();   // Convert temperature to Fahrenheit   //t = 1.8 \* t + 32;   if (isnan(t)) {         Serial.println("Failed to read from DHT sensor!");     return "";   }   else {     Serial.println(t);     return String(t);   } } String readDHTHumidity() {   float h = dht.readHumidity();   if (isnan(h)) {     Serial.println("Failed to read from DHT sensor!");     return "";   }   else {     Serial.println(h);     return String(h);   } } void setup() {   Serial.begin(115200);   // default settings   // (you can also pass in a Wire library object like &Wire2)   //status = bme.begin();   setup_wifi();   client.setServer(mqtt_server, 1883);   client.setCallback(callback);   Serial.println(F("DHTxx test!"));   pinMode(ledPin,OUTPUT);   dht.begin();   // Initialize SPIFFS   if(!SPIFFS.begin()){     Serial.println("An Error has occurred while mounting SPIFFS");     return;   } } void setup_wifi() {  // Connect to Wi-Fi   WiFi.begin(ssid, password);   WiFi.setSleep(false);   while (WiFi.status() != WL_CONNECTED) {     delay(1000);     Serial.println("Connecting to WiFi..");   } // Print ESP32 Local IP Address   Serial.println(WiFi.localIP()); // Route for root / web page   server.on("/", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send(SPIFFS, "/index.html");   });   server.on("/temperature", HTTP_GET, \[](AsyncWebServerRequest   \*request){     request->send_P(200, "text/plain", readDHTTemperature().c_str());   });   server.on("/humidity", HTTP_GET, \[](AsyncWebServerRequest \*request){     request->send_P(200, "text/plain", readDHTHumidity().c_str());   }); // Start server   server.begin(); } void callback(char\* topic, byte\* message, unsigned int length) {   Serial.print("Message arrived on topic: ");   Serial.print(topic);   Serial.print(". Message: ");   String messageTemp;     for (int i = 0; i &lt; length; i++) {     Serial.print((char)message\[i]);     messageTemp += (char)message\[i];   }   Serial.println();   // Feel free to add more if statements to control more GPIOs with MQTT   // If a message is received on the topic esp32/output, you check if the message is either "on" or "off".   // Changes the output state according to the message   if (String(topic) == "jay/sanmohadi/output") {     Serial.print("Changing output to ");     if(messageTemp == "on"){       Serial.println("on");       digitalWrite(ledPin, HIGH);     }     else if(messageTemp == "off"){       Serial.println("off");       digitalWrite(ledPin, LOW);     }   } } void reconnect() {   // Loop until we're reconnected   while (!client.connected()) {     Serial.print("Attempting MQTT connection...");     // Attempt to connect     if (client.connect("ESP32Client")) {       Serial.println("connected");       // Subscribe       client.subscribe("jay/sanmohadi/output");     } else {       Serial.print("failed, rc=");       Serial.print(client.state());       Serial.println(" try again in 5 seconds");       // Wait 5 seconds before retrying       delay(5000);     }   } } void loop() {   if (!client.connected()) {     reconnect();   }   client.loop();   long now = millis();   if (now - lastMsg > 5000) {     lastMsg = now;         // Temperature in Celsius     temperature = dht.readTemperature();       // Uncomment the next line to set temperature in Fahrenheit     // (and comment the previous temperature line)     //temperature = 1.8 \* bme.readTemperature() + 32; // Temperature in Fahrenheit         // Convert the value to a char array     char tempString\[8];     dtostrf(temperature, 1, 2, tempString);     Serial.print("Temperature: ");     Serial.println(tempString);     client.publish("jay/sanmohadi/reading/temperature", tempString);     humidity = dht.readHumidity();         // Convert the value to a char array     char humString\[8];     dtostrf(humidity, 1, 2, humString);     Serial.print("Humidity: ");     Serial.println(humString);     client.publish("jay/sanmohadi/reading/humidity", humString);     delay(2000);   } } |

3. Then we upload the spiffs then the code and we should get a reading like shown ![](https://lh6.googleusercontent.com/2KtO51xRSV8GGnfU0mDbjj49frYyQJncql4Ue3g-yAvffmBh_8e1QDeGnOFEs3DQMTn7cJuvpOqicqrYjVqZoVbbulv5RUFD70TC7RX8pguVWQPycmXWs2jbFZxn_KZf6u29iYUx-DESVPoeIg_mOH0)
4. For the webpage you should get something like this ![](https://lh5.googleusercontent.com/JiR9Vh580EAggfvW2xUMJmPfFlWKleD2ipeiHnF6WqJqNaqN1vAM1eY55tBkCfAkP334y775qTuxV3bur-EoHK4n-39V9zWUjB1l62jU5Q6vawDF2oAVT1sIGYVwxGwp0grFyuBs5oIsJWoFoWbC4lU)As time goes on the web page will make a graph


# Week 7


## Day 7 ( online )


### Node.js setup:

1. Today we’re going to set up our node.js environment. First off we have to download node.js you can follow this tutorial on how install node.js on ubuntu ( <https://www.knowledgehut.com/blog/web-development/install-nodejs-on-ubuntu> ) 
2. Then we use nvm to install node.js version 16.0.0 like here ![](https://lh6.googleusercontent.com/ov5MQ_pbFxRS7rNaPjAIwP5o8GPjIhhBWvXcHs0U4jUEiFAK7w9Jm2O4Sa9wauI9k22DmchVzkkuuCrq1ToDcYghKLqDUZ1FmO73ecSDikoOI-vqtBUSZd1hGLe0pPMyK0ukJ6EFivsfIQiLBbyPj14)
3. Then we download the code and customize it. The code can be found here ( <https://drive.google.com/drive/folders/1rq81PdjlsMFowDBo4Yq6Y9wfd-yVzd25?usp=sharing> )
4.  Now we are going to download Mosquitto. The download link can be found here ( <https://mosquitto.org/download/> ) 
5. Were also going to download MongoDB Compas ( <https://www.mongodb.com/try/download/compass> )
6. We’re going to make a folder called nodejs  
   ![](https://lh6.googleusercontent.com/lRC4EZ5HedokxSBzWhsGlYUeFuDRAipwz5JSD3w2I3IxKKJ8k4skIl5jDeqYP1OwGnZE5Dl0ev-xL8mhSABPoEJZXhsNU0y2AEDNWy9xNXO2JvwP55-9SQlsCcdPtRgktXDSR8EYarNxaXhTRZTDSpQ)then we go to projects → ![](https://lh5.googleusercontent.com/4mi3DgfTo1wITlFawMwkfxEvgMmHvSwiVq-467ZNxqGDrV1gf53-5PNCwd4DkUkX2NYAGmX6DkxV57VPXOXtbuvnlLxSkaCa50Zp6ZAYkFlj8NAYrVE577jINQSBgwk1NT_Wj35yPY-Lcfm_oDcbpR8)then we make a folder called mongostack →![](https://lh4.googleusercontent.com/NEdvepP_15iB_zae74oxRvjlr5UIavE-UnKtEpNB7miZLoamXNChGcRf6AxbhgUerobVqLpFFesyBi8gEzA-b9W6-7RuXBmKJrJ9AQGLYMJ7tqX9RZLlJ6KTjUELadsZliWL4PYuV0MIA1F2HrSBHgM) and in that folder we put our app.js and public folder→ ![](https://lh3.googleusercontent.com/CXDOGy5Ii0n1JeckLy3LfOJR2z3Ywf0b_UB5an1-FiMQboZKtn1dIMNl30lTAGM83wUVoCzbYP1seffvZ8VKzM35EocDl89uuak5UCZMZGOuqvaB5oyq5yg-V-uFTQosmrURHTjznec9Z5XF6DIJcbU)then in that public folder we will have these files →![](https://lh5.googleusercontent.com/zQ5r2pycPm1mlfHjeieKkWMeGPs8zsHzj6h3JeGXwIkB79t1Gi9XpK9T8tNsj-5TXAP6_VofH4B8V_PlcoVfNIGjg6t0QCZg10BfhQzcPpw_KGWOGrAdk45w55Ybxn68RCU5sPJAhk-j7aaphn7voEQ)
7. Now we open up the app.js file and make some changes to it  
   ![](https://lh6.googleusercontent.com/SBi4OM1kjmcGP9nQEnLVpqCn2cV7rsWNV6u4CfJnhWm3IcgkfWEsi0diVSpwuAU9m3qYDhJEQ5g6cmvTWrgewmVYusgOgpLm-sUUK_9tJ2MdlYQMlrc2dmtymx65BCS0lR9r3Yv1MQTFD4GGjYsFuEs)
8. The .js code

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| var MongoClient = require('mongodb').MongoClient; var url = "mongodb://localhost:27017/";  // "mongodb://localhost:27017/iotstack"; var express = require('express'); var app = express(); //Server Variables var host = process.env.IP \|\| 'localhost'; var port = process.env.PORT \|\| 9000; var staticSite = \_\_dirname + '/public'; var mqtt = require('mqtt') var client  = mqtt.connect(\[{host:'localhost',port:'1883'}]) //var client  = mqtt.connect(\[{host:'broker.hivemq.com',port:'1883'}]) //  console.log("Nodejs Server Started!");   // on mqtt conect subscribe on tobic test client.on('connect', function () {   client.subscribe('jaysanmo/codettes/01', function (err) {  console.log("sub scribing to test topic");       if(err)       console.log(err)   }) })  //when recive message  client.on('message', function (topic, message) {   json_check(message) }) //check if data json or not function json_check(data) {     try {        // JSON.parse(data);  msg = JSON.parse(data.toString()); // t is JSON so handle it how u want     } catch (e) { console.log("message could not valid json " + data.toString);         return false;     }  console.log(msg);  var msgobj = { "msg": msg }; // message object     Mongo_insert(msgobj) console.log(msgobj); } //insert data in mongodb function Mongo_insert(msg){ MongoClient.connect(url, function(err, db ) {     if (err) throw err;     var dbo = db.db("cb");     dbo.collection("class").insertOne(msg, function(err, res) {       if (err) throw err;    console.log("data stored");       //db.close();     });   }); } // ENABLE CORS for Express (so swagger.io and external sites can use it remotely .. SECURE IT LATER!!) app.use(function(req, res, next) {   res.header("Access-Control-Allow-Origin", "\*");   res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");   next(); }); // ROUTES FOR OUR API // ============================================================================= var router = express.Router();              // get an instance of the express Router app.use('/', express.static(staticSite)); // Use router for all /api requests if (! process.env.C9_PID) {     console.log('Running at http&#x3A;//'+ host +':' + port); } app.listen(port, function() { console.log('Listening')}); |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_DHT_MQTT_MongDb_Node.js_Mosquitto_link_app.js_code) )

9. Then we go to our command console and go to the mongostack folder and download all the necessary files 
10. First is express ![](https://lh3.googleusercontent.com/gUM5t9_Bwu3rKwlncNRPo5FBN1vRCdkB5W2Op5WkA7SmMwPeu6c0m2z9_Pw3wjSj5K4j320egkrb26Qo4cgVxIaQF9Hv2lx8rk6rWcRJ6Vegxhw9lOPvODnkKM6v1HhBGTIVUYuAjC76btJf0KFcEac)
11. Then MQTT ![](https://lh5.googleusercontent.com/Vw9fmE_xQeuhxRyHwnBU3oEtSN6TjwPZ1TSVgYNPc4KZPyZDeOS4QVAudKUXj95tdfOXltJ0Yady-yWVJrq-sMOlvz6xOBeDkageBVUfDBYoLpVK8drxH-YTSYzTAEEZFkguzKhtPRM4E-t1pClmItU)
12. Then we open a different console where we search for our ip and we check our ip on ubuntu by using this command ![](https://lh5.googleusercontent.com/Rb1tx2TOhnxs88XWle8fXCkak1p6hoLFtKp-XAAZFXFGy-y5zNeN-ycu9izEdCDOYoTz7T2C1JIafQ_jS85GNlV7oB3qjXgshNM6ldGJdz-XoMj3vweyIYlIEoIKksf9MAh7MEPMtBMvvSAq5Wzp0Pk)
13. Then we find our ip here ![](https://lh3.googleusercontent.com/us2rsQVB3qqDlz7n5MSdxj_etyehG_hY91lQw2uljvK6CgTvpfo9Zl81gGjTBpGeVTkdJG0y-suJSF81HIl3U0uyZC-rC6BSNAvnP00x5bVdEx1tS9m0I77YMDJdpUitvRQmYVMugIIZNRDcBnmoLg0)
14.  Now we go to our mosquitto folder and put a test.conf file in there ![](https://lh3.googleusercontent.com/iiWtIonqRoc_KM26n8L0jrNgZjR_H_y08qJG0v5FY2mUK-Gh4aRDYEaFOLE7njRC3KU5u6peRzzUR2hII7AcePxq0RC7i417IprzSIC-VddGel9v0DRP2L7nIVoKzQmWLH_m19K3MBzUUZjbWrq3rlg)
15.  In the test.conf we put this ![](https://lh6.googleusercontent.com/5tqIazt4jAFJl8jLI1saZ-ALYooj6s3x6AMh1dNRcL4npz-oVicuS_gggomUgWKmKXcmVgYLswMHee8YJGy1b5p38L_ZwFEZZ7aOXGt_lr6AYLCSzvnY4wv8JSBPH_YMYGX0g46165tvByT2_940yOo)
16.  Now we open up a new terminal and path to mosquitto. Then we do  
    “mosquitto -v -c test.conf” like here ![](https://lh5.googleusercontent.com/nFXK_bhYwIklG3UmRmXlITzANEfFo1nEesRUO07gOAMSEy5Ehsd9SI6lVHieIjmpVBOTf4aPcTfJ6J-lPHSDJy3JnL8d8CZxWUMPNEeWUjJCXYM8b-9wWj_i2p4Lup-3LQ_bIoesyDYPhchIL7kp_aM)but here there's a problem but there is a fix for that first we look on which ip the mosquitto is on by using this command ![](https://lh3.googleusercontent.com/8p33c4JEN3u4Y-peEjVxuaPW-jZIozAQEEXn0eny7TToYmbHEqp1ldqHtAwiKpFIriYFA5h4UP3Bg94J3Wy1ux9pQQy4wjG_fdRFrRirI5tf7QFwa26F2qCLFmThsa4VGOvyvOaJbesWVYntAJNwj_g)
17.  We kill the current running program like here ![](https://lh6.googleusercontent.com/nIfwnlyJj8RJFiT5dFDUTXRorcJceBC9oWFIA_JCaKZktAcuTnhKj5mKTYlvhXyoo4vszVyNIJXzasFe18R50tlE7pQbLgEo26qW7CtqusC9v6gszgInX8Zz3l0bDA1PhN1bFmG-3gHo3QkPbs4nEmw)
18.  Now the problem should be fixed as seen here ![](https://lh6.googleusercontent.com/xAS1hN_nhuZwUsj95U2JHe0OArpKqX8wnSRJ0T9Wba-jO4p4m0_6AdEEqzb_8Key6gs6KweJ9LphLnkHe6eiwW6FkM05v01eg667K3l5Y80p7-ZvqNbkVEAEYEVKgDGjBqx3PuAVpohiUe9xABVdk2A)
19.  Now we go to the mongostack folder and start our app.js file as shown here ![](https://lh5.googleusercontent.com/VqzE67qKDd_rGh_QIVg1Dl6WFq16DTmLb6chOzuK925UmLYClt1oqj6I23dq2z6m1CiWmg-prcWgfso0vXuaWiGlDueyJkJVp340etYGP5d3NXSBArTEE634kAiSkcN9xCBr-ifJDWvTV4RpeC1pE9Q)
20.  With all that done we upload the code and see our temps and humid in our serial monitor ![](https://lh5.googleusercontent.com/BjB1uGCZmwUJb5oWoi6QNtrjfrfbTWpjC-8mrpCqg3Ubb2fiKSOdemYKmmFktlWSg5sqHSuu7vniM7pJ5QGRsuqLa91xpoy8yWH65dysRRkLaP9__9ncjxoRs0xvo2dPVp3tjo3rdalvhStuNFiCMjI)
21.  We should also see it in our mosquitto terminal like here ![](https://lh4.googleusercontent.com/fNFv7-a1Fbhvpb8JOBuRW1vUPqlB0TdBPBqrhWyp7P3zKqc-KZBYWZJP1x1nsjkTobKExXcZfQ0udgM_2km8lfmzIadQY186DFsotw1uJ21x3ljJvypz8SjGlVahWu4CVmn8A72OJleFMbjQF5DdIlM)
22. And also in our nodejs terminal ![](https://lh6.googleusercontent.com/6DEUw-Ckvzmqpr-MS_XY7gliaTLSkWlRdCs6X9RnKwXToSHbD7yt__NcEp5Fj_uAPHpVo95HKNClf5iqLIEFUuX03gBCtrs46wczf_gVyUsOHuhUIWRfZ6S87bIws5CQOZkyYgmi7kVj2F-eGwVCvHk)
23. If we want to see the info on our MQTT lens we have to change the broker to our ip here ![](https://lh6.googleusercontent.com/EgSo5fpIDBWwVEpqh6WonRX2eNS04fqxtQN_52JIvvzlB_JaaDFBShvlxkC-Djg6KUzzfN8wyYKCvZBf7_4h6F05H7U5HghMxmBoaAJAgV5h4zXXwbGtOEAGiHV6UCtLdQIX4hspDJmrXawUAwBGB60)
24.  And also in our MQTT lens ![](https://lh6.googleusercontent.com/74Lj_aiW6wzEWBcSOmcGw8ETe6_4H9zafvQvgiwWvhJM7ozN22OIEKRrhg_gbtsm0bsP2QJmYhA7TEHTR-3rxWPqH0_leuf2tbO1NzFxndJn56JVXnCecqp-OzzCjPJ6ZwFu37wXMZ9gooSpATOh2D4)
25. The index.html code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| &lt;?xml version="1.0" encoding="UTF-8" standalone="no"?> &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http&#x3A;//www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> &lt;html xmlns="http&#x3A;//www.w3.org/1999/xhtml">   &lt;head>     &lt;title>Mosquitto Websockets&lt;/title>     &lt;meta name="viewport" content="width=device-width, initial-scale=1.0">     &lt;script src="mqttws31.js" type="text/javascript">&lt;/script>     &lt;script src="jquery.min.js" type="text/javascript">&lt;/script>     &lt;script src="config.js" type="text/javascript">&lt;/script>     &lt;script src="https&#x3A;//code.highcharts.com/highcharts.js">&lt;/script>   &lt;/head>   &lt;body>     &lt;h1>Mosquitto Websockets&lt;/h1>     &lt;div class="widget-container" >       &lt;div class="widget">         &lt;i class="fa fa-thermometer-empty">&lt;/i>         &lt;span class="label">Temp&lt;/span>         &lt;span class="widget-value temp-data">15&lt;/span>       &lt;/div>             &lt;div class="widget">         &lt;i class="fa fa-tint">&lt;/i>         &lt;span class="label">Humid&lt;/span>         &lt;span class="widget-value humid-data">50%&lt;/span>       &lt;/div>       &lt;/div>     &lt;div id="chart-container">&lt;/div>     &lt;div>         &lt;div>Subscribed to &lt;input type='text' id='topic' disabled />         Status: &lt;input type='text' id='status' size="80" disabled />&lt;/div>         &lt;ul id='ws' style="font-family: 'Courier New', Courier, monospace;">&lt;/ul>     &lt;/div>         &lt;script type="text/javascript">     var mqtt;     var reconnectTimeout = 2000;     function MQTTconnect() { if (typeof path == "undefined") { path = '/mqtt'; } mqtt = new Paho.MQTT.Client( host, port, path, "web\_" + parseInt(Math.random() \* 100, 10) );         var options = {             timeout: 3,             useSSL: useTLS,             cleanSession: cleansession,             onSuccess: onConnect,             onFailure: function (message) {                 $('#status').val("Connection failed: " + message.errorMessage + "Retrying");                 setTimeout(MQTTconnect, reconnectTimeout);             }         };         mqtt.onConnectionLost = onConnectionLost;         mqtt.onMessageArrived = onMessageArrived;         if (username != null) {             options.userName = username;             options.password = password;         }         console.log("Host="+ host + ", port=" + port + ", path=" + path + " TLS = " + useTLS + " username=" + username + " password=" + password);         mqtt.connect(options);     }     function onConnect() {         $('#status').val('Connected to ' + host + ':' + port + path);         _// Connection succeeded; subscribe to our topic_         mqtt.subscribe(topic, {qos: 0});         $('#topic').val(topic);                 _// Set up chart_         chart = Highcharts.chart('chart-container', {         chart: {           type: 'line',         },         title: {           text: 'Sensor Data',         },         xAxis: {           type: 'datetime',           title: {             text: 'Timestamp'           }         },         yAxis: \[{           title: {             text: 'Temp'           }         }, {           title: {             text: 'Humid'           },           opposite: false _// display on opposite side of chart_         }],         series: \[{           name: 'Temp',           data: \[],           yAxis: 0 _// use the first yAxis (index 0) for this series_         }, {           name: 'Humid',           data: \[],           yAxis: 1 _// use the second yAxis (index 1) for this series_         }]       });     }     function onConnectionLost(response) {         setTimeout(MQTTconnect, reconnectTimeout);         $('#status').val("connection lost: " + responseObject.errorMessage + ". Reconnecting");     };     function onMessageArrived(message) {         var topic = message.destinationName;         var payload = message.payloadString;         $('#ws').prepend('&lt;li>' + topic + ' = ' + payload + '&lt;/li>');     _// Parse message data_         var data = JSON.parse(payload);         var timestamp = new Date().getTime();         var temp = parseFloat(data.temp);         var humid = parseFloat(data.humid);                 chart.series\[0].addPoint(\[Date.now(), data.temp]);         chart.series\[1].addPoint(\[Date.now(), data.humid]);         _// Redraw the chart_         chart.redraw();         _//WIDGET_         const widgetContainers = document.querySelectorAll('.widget-container');                 _// Loop through each widget container and update the widget data_         widgetContainers.forEach(widgetElement => {           widgetElement.querySelector('.temp-data').textContent = data.temp;           widgetElement.querySelector('.humid-data').textContent = data.humid;         });     };     $(document).ready(function() {         MQTTconnect();     });     &lt;/script>   &lt;/body> &lt;/html> &lt;style>   .widget-container {       display: flex;       flex-wrap: wrap;       justify-content: space-between;       width: 100%;       max-width: 1200px;       margin: 0 auto;     }    .widget {       flex-basis: calc((100% - 30px) / 4); _/\* 4 widgets in the first row \*/_       margin-bottom: 20px;       background-color: #ffffff;       padding: 10px;       border: 1px solid #e3e3e3;       text-align: center;     } &lt;/style> |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_DHT_MQTT_MongoDB_Node.js_Mosquitto_html_code) )

26. The C++ code 

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| // Import required libraries #include &lt;WiFi.h> #include &lt;ESPAsyncWebServer.h> #include &lt;SPIFFS.h> #include &lt;Wire.h> #include &lt;Adafruit_Sensor.h> #include &lt;DHT.h> //MQTT #include&lt;PubSubClient.h> #include &lt;ArduinoJson.h> WiFiClient espClient; PubSubClient client(espClient); //MQTT const char \* mqtt_broker = "192.168.1.69"; //const char \* mqtt_broker = "broker.hivemq.com"; const char \* mqtt_topic = "jaysanmo/codettes/01"; // CHANGE SensorID here! const char \* mqtt_User = ""; const char \* mqtt_Password = ""; // Replace with your network credentials const char\* ssid = "Team09"; const char\* password = "H@ckTe@m)("; #define DHTPIN 4 #define DHTTYPE    DHT11 DHT dht(DHTPIN, DHTTYPE); // Create AsyncWebServer object on port 80 AsyncWebServer server(80); float t = 0; float h = 0; String readDHTTemperature() {   // Read temperature as Celsius (the default)   float t = dht.readTemperature();   // Convert temperature to Fahrenheit   //t = 1.8 \* t + 32;   if (isnan(t)) {     Serial.println("Failed to read from DHT sensor!");     return "";   }   else {     Serial.println(t);     return String(t);   } } String readDHTHumidity() {   float h = dht.readHumidity();   if (isnan(h)) {     Serial.println("Failed to read from DHT sensor!");     return "";   }   else {     Serial.println(h);     return String(h);   } } void setup() {   // Serial port for debugging purposes   Serial.begin(115200);   dht.begin();   // Initialize SPIFFS   if (!SPIFFS.begin()) {     Serial.println("An Error has occurred while mounting SPIFFS");     return;   }   // Connect to Wi-Fi   WiFi.begin(ssid, password);   WiFi.setSleep(false);   while (WiFi.status() != WL_CONNECTED) {     delay(1000);     Serial.println("Connecting to WiFi..");   }   // Print ESP32 Local IP Address   Serial.println(WiFi.localIP());   //MQTT   client.setServer(mqtt_broker, 1883);   if (initMqtt()) {     client.publish("jaysanmo/codettes/01", "Hello from ESP32");   }   // Route for root / web page   server.on("/", HTTP_GET, \[](AsyncWebServerRequest \* request) {     request->send(SPIFFS, "/index.html");   });   server.on("/temperature", HTTP_GET, \[](AsyncWebServerRequest   \* request) {     request->send_P(200, "text/plain", readDHTTemperature().c_str());   });   server.on("/humidity", HTTP_GET, \[](AsyncWebServerRequest \* request) {     request->send_P(200, "text/plain", readDHTHumidity().c_str());   });   // Start server   server.begin(); } unsigned long lastMqttTime = millis(); const unsigned long Mqtt_INTERVAL_MS = 2000; void loop() {   client.loop();   // Send regular mqtt data   if ((millis() - lastMqttTime) > Mqtt_INTERVAL_MS) {     if (client.connected())     {       //GetWeatherData();       handle_MqttData();       lastMqttTime = millis();     } else     {       initMqtt();     }   } } void GetWeatherData() {   } bool initMqtt() {   if (!client.connected()) {     Serial.println("Connecting to MQTT...");     if (client.connect("ESP32Client", mqtt_User, mqtt_Password )) {       Serial.println("connected");       return true;     } else {       Serial.print("failed with state ");       Serial.print(client.state());       delay(2000);       return false;     }   } } void handle_MqttData() {   float h = dht.readHumidity();   float t = dht.readTemperature();   StaticJsonDocument&lt;2048> doc;   //JsonObject createNestedObject() const;   doc\["temp"] = t;   doc\["humid"] = h;   char out\[2048];   int b = serializeJson(doc, out);   serializeJson(doc, Serial);   Serial.print("bytes ->  ");   Serial.print(b, DEC);   // add if delivered or not   client.publish((char\*)mqtt_topic, out) ? Serial.println(" -> delivered") : Serial.println(" -> failed"); } |

( [link to github code](https://github.com/0SaNJ/codettesbootcamp_2023_code/blob/main/ESP_32_DHT_MQTT_Node.js_MongoDB_Mosquitto_link_c%2B%2B_code) )


# Week 8


## Day 8 ( online )


### MongoDB connection: 

1. All the steps from last week 
2. Connect to mongoDB Compass as seen here and you should see this  
   ![](https://lh5.googleusercontent.com/XZr5prEMqRTmKeaovDoc-WQsJEqk4gIdBIE5Zza8SrR1qJendD-K0GiMkuaASPylNBx2chTc27A-c7M5QfDWyJzyCs9fCov0AMbQT15ZmqJuo4RUzatqokTM0B_g2YiJPzbEmft_Z0zBwOXUPkqxUF4)


# Week 9


## Day 9 ( online )


### Live Highcharts:

1. Same steps as the last 2 weeks
2. Now we go into our index.html ( download index.html here <https://drive.google.com/file/d/1kJpv-vVDiMtk_jqT-kp-OBGmptDSfbx5/view?usp=drive_link> ) file in our mongostack folder then we put the highcharts in ( <https://www.highcharts.com/> ) ![](https://lh3.googleusercontent.com/y2_RUtxuq7fTNnvUqGEbTvJjmRflLYKC15MSSyJAF9stAweHVbvWVDozAKTeIxKA5xCy5k8dS-wF8CBtoaE0aPF_jus5Ychgxo1CB_o6CBK3DyHhprZhDYKMgT3yOjuwnVmLDSQ34aHZqNyl-QcQAjM) →![](https://lh3.googleusercontent.com/4iquGMKcCMVBhNPNyX57MkgNcjNWeEnH2IGuX9MLOQY1-rW5V_ghSJhUJhPlaiv-mmE1lZ6ZVhGBQNUZ11rDzJ4QwSXXBKfL8TFrsmflay6_potTs-Mg_JYKe2Ttr2gT3nCl-6JNHGTb4qg4IU52H0U)  → ![](https://lh3.googleusercontent.com/xvQeF4V5sqfCY49yaGaiWfSMjpgPTzgbcUxzYew6oKxJthCwhgBh-41NkO8zWLVkObWqJflGWh2mcHRIOJasHYiwqxFhgMiR-EAo0W1Fao8L3ohpWW4fxdW5P3Y4a2FQwiUsZEizJ42h8UiFA5w4DEc)
3. Your chart should look something like this ![](https://lh3.googleusercontent.com/a50moMlq5fAiuCcipRrEObn1sdvtJtGfm7jHvBkb59--4CfcCr6P5tWW7XAGgtdwPL9v7rJLHWjxw84VglYEiPRyAZZzX-taW-nBlvj-FX1Ddvi2HnYMs42f_6xWY_NPfAikLpDtCmaBPpB92x4eBVE) 


# Week 10 


## Day 10 ( online )


### Customizing our highcharts:

1. First we do the same things as last week and open our index.html 
2. Then we customize it 
3. First we add our icons as shown here  
   ![](https://lh4.googleusercontent.com/EWmTffoZ-DitonpvHli9zFmkXAK_YFzDKAemuHd7H4RQM5jacbjwM7QS3XtW4z3e6KNou9D8dPzhbUTIEqZZWJ2CmFoP40rgacUtsGJLF_c25eYmrjGSgKDiqKJRZr4TTI8Lo7PolFvg9Bso6kCaJww)
4. Then to update the info the charts we do this  
   ![](https://lh4.googleusercontent.com/hKbYRoI8f-v80j_BOnZZPjr3xCqXfIoMkzKvBUOVm8Z_JaritzkcxTKe8Zenh7aZWvivrl1K3OYHilMfCxpoOlgFeBeHUdr4xh9aUtQhf_EO3Ktrg8q6-rXLeySyCADobj8HhC3-MLnyDvr_FVlnCP0)
5. Then we style it to our liking here  
   ![](https://lh4.googleusercontent.com/YfRfigczYUFo92N7_V0FnpH8AW3jlW-DyfBBbrHhEYFj7S9PN1s_8tPf3vMsumTtmoLFLWIVWrdJCB_zfRJX54OAIWfF3YYFd2SBRKCneyf55gqfz3riE3QfomFt6JlWQ601V8iPeSViYAy3KCQflsQ)
6. It should look something like this ![](https://lh3.googleusercontent.com/1O-V1kl0TCCTfNKp94ggzxDBEpHCEUDTKHUfvZ25yL_T9OlWHnNi44wKx__Rd9Uzz438lUhd5W67Z8uV87dHr5j8r8IBI7gVWqYeiHQo1oEjR82i1ouTlbBRIHjJVvbzUJcdvYbvQf53s-KHE2fODwM)
